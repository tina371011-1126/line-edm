async function fastGenerate() {
    const btn = document.getElementById('genBtn');
    btn.disabled = true;
    btn.innerText = "â³ è™•ç†ä¸­...";
    
    try {
        const base64 = canvas.toDataURL('image/jpeg', 0.8);
        const fd = new FormData();
        fd.append("file", base64);
        fd.append("upload_preset", UPLOAD_PRESET);
        
        const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, { method: "POST", body: fd });
        const data = await res.json();
        
        const imgId = data.public_id;
        
        // æŠ“å–è£½ä½œäººçš„ Vid
        let myVid = localStorage.getItem('user_vid') || 'CREATOR';
        
        // ç”Ÿæˆé€£çµ
        const shareUrl = `https://liff.line.me/${LIFF_ID}/?id=${imgId}&sid=${myVid}`;
        const finalMsg = `ğŸ”” é€™æ˜¯çµ¦æ‚¨çš„æ—©å®‰ç¥ç¦ï¼š${shareUrl}`;
        
        document.getElementById('hiddenText').value = finalMsg;
        
        if (await copyToClipboard(finalMsg)) {
            document.getElementById('successMsg').style.display = 'block';
            btn.innerText = "âœ¨ è¤‡è£½æˆåŠŸ";
        } else {
            document.getElementById('manualArea').style.display = 'block';
        }

        gtag('event', 'share_generated', { 'my_vid': myVid, 'image_id': imgId });

    } catch (e) { alert("ä¸Šå‚³å¤±æ•—"); }
    btn.disabled = false;
}
