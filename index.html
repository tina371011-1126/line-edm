<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> </title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body style="background:#fff;">
    <script>
        async function send() {
            try {
                await liff.init({ liffId: "2008941488-Phn5v50S" });
                if (!liff.isLoggedIn()) { liff.login(); return; }

                // 抓取最短參數 i
                const p = new URLSearchParams(window.location.search);
                const i = p.get('i');

                if (i && liff.isApiAvailable('shareTargetPicker')) {
                    const img = decodeURIComponent(i);
                    
                    // 使用 Image Message 格式：這保證了 100% 原圖比例與尺寸
                    await liff.shareTargetPicker([
                        {
                            "type": "image",
                            "originalContentUrl": img,
                            "previewImageUrl": img
                        }
                    ]);
                }
                liff.closeWindow();
            } catch (e) { liff.closeWindow(); }
        }
        send();
    </script>
</body>
</html>
